---
title: 分布式垂直化搜索基础
date: 2016-02-27 14:58:17
tags: [lucene, 搜索]
---

#### 搜索引擎基本概念
- `倒排索引`: 反向索引, 搜索引擎中最常见的数据结构, 将文档中的词作为关键字, 建立与文档的映射关系, 通过对倒排索引的查询, 可以根据词快速获取包含这个词的文档列表
- `分词`: 切词, 将句子或者段落进行切割, 从中提取包含固定语义的词
- `停止词`: 无意义的词, 将会被忽略, 例如a, an, the, 的, 了
- `排序`: 当一个关键字进行搜索时会有许多命中文档, 搜索引擎可以给用户的价值就是快速的找到需要的文档, 因此, 相关性更大的内容将会排在前面, 这会使用适当的排序算法

<!-- more -->

- `Lucene`的概念
  - `文档(Document)`: 文档是一系列字段(field)的集合, 字段则代表以系列与文档相关的内容. 类似数据库的行记录
  - `字段(Field)`: 索引中的每个文档都包含一个或者多个不同的名称的字段, 每个字段都包含了字段的名称和字段对应的值, 并且字段
还可以是不同的类型, 如字符串, 整型, 浮点型等
  - `词(Term)`: 搜索的基本单元, 与Field对应, 包含了搜索的字段的名称以及搜索的关键字, 可以用它来查询指定的字段中包含特定内容的文档.
  - `查询(Query)`: 最基本的查询是一系列的Term的条件组合, 称为`TermQuery`, 但是也有可能是短语查询`PhraseQuery`,
前缀查询`PrefixQuery`, 范围查询(`TernRangeQuery`, `NumericRangeQuery`)等
  - `分词器(Analyzer)`: 文档在被索引前, 需要经过分词器的处理, 以提取关键字的语义单元, 建立索引, 并剔除无用的信息, 如停止词等, 以提高查询的准确性. 常见的分词包括`一元分词`, `二元分词`, `词库分词`等

#### Lucene的常用对象
- `Directory`: 索引的存储文职
- `Analyzer`: 分词器接口
- `StandardAnalyzer`: 标准分词器, 一个Analyzer的实现, 中文分词器
- `Document`: 代表一个文档对象
- `Field`: 文档的字段, 使用Document.add添加
- `IndexWriter`: 索引输出器, 把文档写入到索引当中
- `QueryParser`: 查询解析器, 根据关键字构建查询对象, 表示在文档对象中如何查找关键字
- `MultiFieldQueryParser`: 多字段查询解析器, 根据关键字构建文档的多字段搜索关键字
- `Query`: 查询接口
- `IndexSearcher`: 索引搜索器
- `TopDocs`: `IndexSearcher.search(query, filter, maxRecords)`后的命中结果文档的文档编号和总条数
- `Term`: 多查询的一种, 比如按照字段的查询, 可以用这个类构建`Query`对象
- `NumericRangeQuery`: 字段的值是整数型的话, 那么可以根据整型的范围来查询
- `WildcardQuery`: 通配符查询
- `PhraseQuery`: 句子查询
- `BooleanQuery`: 多条件组合查询

